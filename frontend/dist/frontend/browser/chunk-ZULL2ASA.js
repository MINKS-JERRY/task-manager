import{a as F,b as L,e as A,g as N,h as U}from"./chunk-EXJH2W3I.js";import{C,F as k,G as h,H as o,I as r,M as T,N as g,O as d,Q as c,R as u,S as w,T as v,U as x,V as M,aa as S,ba as y,ca as E,ea as I,j as O,m as b,na as V,p as m,q as p,v as a,x as f,y as P}from"./chunk-LJUGKNIQ.js";var _=class s{constructor(e,t){this.http=e;this.env=t;this.apiUrl=`${this.env.apiUrl}/tasks`}apiUrl;getTasks(){return this.http.get(this.apiUrl)}createTask(e){return this.http.post(this.apiUrl,e)}updateTask(e,t){return this.http.put(`${this.apiUrl}/${e}`,t)}deleteTask(e){return this.http.delete(`${this.apiUrl}/${e}`)}static \u0275fac=function(t){return new(t||s)(b(I),b("environment"))};static \u0275prov=O({token:s,factory:s.\u0275fac,providedIn:"root"})};function D(s,e){if(s&1){let t=T();o(0,"div",7)(1,"h3"),c(2),r(),o(3,"div",8)(4,"label",9),c(5,"Title:"),r(),o(6,"input",10),M("ngModelChange",function(i){m(t);let l=d();return x(l.newTask.title,i)||(l.newTask.title=i),p(i)}),r()(),o(7,"div",8)(8,"label",11),c(9,"Description:"),r(),o(10,"textarea",12),M("ngModelChange",function(i){m(t);let l=d();return x(l.newTask.description,i)||(l.newTask.description=i),p(i)}),r()(),o(11,"div",13)(12,"button",14),g("click",function(){m(t);let i=d();return p(i.saveTask())}),c(13),r(),o(14,"button",15),g("click",function(){m(t);let i=d();return p(i.cancelEdit())}),c(15,"Cancel"),r()()()}if(s&2){let t=d();a(2),u(t.editingTask?"Edit Task":"Add New Task"),a(4),v("ngModel",t.newTask.title),a(4),v("ngModel",t.newTask.description),a(3),w(" ",t.editingTask?"Update Task":"Add Task"," ")}}function H(s,e){if(s&1){let t=T();o(0,"div",16)(1,"div",17)(2,"div",18)(3,"input",19),g("change",function(){let i=m(t).$implicit,l=d();return p(l.toggleComplete(i))}),r(),o(4,"h3"),c(5),r()(),o(6,"p"),c(7),r(),o(8,"div",20)(9,"button",21),g("click",function(){let i=m(t).$implicit,l=d();return p(l.editTask(i))}),c(10,"Edit"),r(),o(11,"button",22),g("click",function(){let i=m(t).$implicit,l=d();return p(l.deleteTask(i._id))}),c(12,"Delete"),r()()()()}if(s&2){let t=e.$implicit;a(3),k("checked",t.completed),a(),h("completed",t.completed),a(),u(t.title),a(),h("completed",t.completed),a(),u(t.description)}}function q(s,e){s&1&&(o(0,"div",23)(1,"p"),c(2,"No tasks yet. Click 'Add New Task' to get started!"),r()())}var W=class s{constructor(e,t){this.taskService=e;this.authService=t;this.authService.authState$.subscribe(n=>{n.username&&(this.welcomeMessage=n.isNewUser?`Welcome ${n.username}!`:`Welcome back, ${n.username}!`)})}welcomeMessage="";tasks=[];showAddForm=!1;editingTask=null;newTask={title:"",description:"",completed:!1};ngOnInit(){this.loadTasks()}loadTasks(){this.taskService.getTasks().subscribe(e=>{this.tasks=e},e=>{console.error("Error loading tasks:",e)})}saveTask(){this.editingTask?this.taskService.updateTask(this.editingTask._id,{title:this.newTask.title,description:this.newTask.description}).subscribe(e=>{let t=this.tasks.findIndex(n=>n._id===e._id);t!==-1&&(this.tasks[t]=e),this.resetForm()},e=>{console.error("Error updating task:",e)}):this.taskService.createTask(this.newTask).subscribe(e=>{this.tasks.push(e),this.resetForm()},e=>{console.error("Error creating task:",e)})}editTask(e){this.editingTask=e,this.newTask={title:e.title,description:e.description,completed:e.completed},this.showAddForm=!0}deleteTask(e){this.taskService.deleteTask(e).subscribe(()=>{this.tasks=this.tasks.filter(t=>t._id!==e)},t=>{console.error("Error deleting task:",t)})}toggleComplete(e){this.taskService.updateTask(e._id,{completed:!e.completed}).subscribe(t=>{let n=this.tasks.findIndex(i=>i._id===t._id);n!==-1&&(this.tasks[n]=t)},t=>{console.error("Error updating task completion:",t)})}cancelEdit(){this.resetForm()}resetForm(){this.showAddForm=!1,this.editingTask=null,this.newTask={title:"",description:"",completed:!1}}static \u0275fac=function(t){return new(t||s)(f(_),f(V))};static \u0275cmp=P({type:s,selectors:[["app-task-list"]],decls:10,vars:4,consts:[[1,"task-container"],[1,"welcome-message"],[1,"add-button",3,"click"],["class","task-form",4,"ngIf"],[1,"task-list"],["class","task-item",4,"ngFor","ngForOf"],["class","empty-state",4,"ngIf"],[1,"task-form"],[1,"form-group"],["for","title"],["type","text","id","title","placeholder","Enter task title","required","",3,"ngModelChange","ngModel"],["for","description"],["id","description","placeholder","Enter task description","rows","3",3,"ngModelChange","ngModel"],[1,"button-group"],[1,"save-button",3,"click"],[1,"cancel-button",3,"click"],[1,"task-item"],[1,"task-content"],[1,"task-header"],["type","checkbox",3,"change","checked"],[1,"task-actions"],[1,"edit-button",3,"click"],[1,"delete-button",3,"click"],[1,"empty-state"]],template:function(t,n){t&1&&(o(0,"div",0)(1,"div",1)(2,"h2"),c(3),r()(),o(4,"button",2),g("click",function(){return n.showAddForm=!0}),c(5,"Add New Task"),r(),C(6,D,16,4,"div",3),o(7,"div",4),C(8,H,13,7,"div",5)(9,q,3,0,"div",6),r()()),t&2&&(a(3),u(n.welcomeMessage),a(3),k("ngIf",n.showAddForm),a(2),k("ngForOf",n.tasks),a(),k("ngIf",n.tasks.length===0))},dependencies:[E,S,y,U,F,L,N,A],styles:[".task-container[_ngcontent-%COMP%]{max-width:800px;margin:2rem auto;padding:2rem;background-color:#fff;border-radius:8px;box-shadow:0 2px 4px #0000001a}.welcome-message[_ngcontent-%COMP%]{text-align:center;margin-bottom:2rem;padding:1rem;background-color:#f8f9fa;border-radius:8px}.welcome-message[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:24px;color:#007bff;margin:0}.add-button[_ngcontent-%COMP%]{background-color:#007bff;color:#fff;padding:.5rem 1rem;border:none;border-radius:4px;cursor:pointer;margin-bottom:1.5rem;transition:background-color .3s}.add-button[_ngcontent-%COMP%]:hover{background-color:#0056b3}.task-form[_ngcontent-%COMP%]{background-color:#f8f9fa;padding:1.5rem;border-radius:4px;margin-bottom:2rem}.task-form[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin-bottom:1rem;color:#333}.form-group[_ngcontent-%COMP%]{margin-bottom:1rem}.form-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{display:block;margin-bottom:.5rem;color:#555}.form-group[_ngcontent-%COMP%]   input[_ngcontent-%COMP%], .form-group[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]{width:100%;padding:.5rem;border:1px solid #ddd;border-radius:4px;margin-bottom:.5rem}.form-group[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:focus, .form-group[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]:focus{outline:none;border-color:#007bff}.button-group[_ngcontent-%COMP%]{display:flex;gap:1rem;margin-top:1rem}.button-group[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{padding:.5rem 1rem;border:none;border-radius:4px;cursor:pointer;transition:background-color .3s}.button-group[_ngcontent-%COMP%]   .save-button[_ngcontent-%COMP%]{background-color:#28a745;color:#fff}.button-group[_ngcontent-%COMP%]   .save-button[_ngcontent-%COMP%]:hover{background-color:#218838}.button-group[_ngcontent-%COMP%]   .cancel-button[_ngcontent-%COMP%]{background-color:#6c757d;color:#fff}.button-group[_ngcontent-%COMP%]   .cancel-button[_ngcontent-%COMP%]:hover{background-color:#5a6268}.task-list[_ngcontent-%COMP%]   .task-item[_ngcontent-%COMP%]{background-color:#fff;border:1px solid #ddd;border-radius:4px;padding:1rem;margin-bottom:1rem;transition:box-shadow .3s}.task-list[_ngcontent-%COMP%]   .task-item[_ngcontent-%COMP%]:hover{box-shadow:0 2px 4px #0000001a}.task-content[_ngcontent-%COMP%]   .task-header[_ngcontent-%COMP%]{display:flex;align-items:center;gap:1rem;margin-bottom:.5rem}.task-content[_ngcontent-%COMP%]   .task-header[_ngcontent-%COMP%]   input[type=checkbox][_ngcontent-%COMP%]{margin:0}.task-content[_ngcontent-%COMP%]   .task-header[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0;color:#333}.task-content[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:#666;margin:.5rem 0}.task-content[_ngcontent-%COMP%]   .completed[_ngcontent-%COMP%]{text-decoration:line-through;color:#999}.task-actions[_ngcontent-%COMP%]{display:flex;gap:.5rem;margin-top:1rem}.task-actions[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{padding:.4rem .8rem;border:none;border-radius:4px;cursor:pointer;transition:background-color .3s}.task-actions[_ngcontent-%COMP%]   .edit-button[_ngcontent-%COMP%]{background-color:#ffc107;color:#212529}.task-actions[_ngcontent-%COMP%]   .edit-button[_ngcontent-%COMP%]:hover{background-color:#e0a800}.task-actions[_ngcontent-%COMP%]   .delete-button[_ngcontent-%COMP%]{background-color:#dc3545;color:#fff}.task-actions[_ngcontent-%COMP%]   .delete-button[_ngcontent-%COMP%]:hover{background-color:#c82333}.empty-state[_ngcontent-%COMP%]{text-align:center;color:#6c757d;padding:2rem;background-color:#f8f9fa;border-radius:4px;margin-top:1rem}"]})};export{W as TaskListComponent};
